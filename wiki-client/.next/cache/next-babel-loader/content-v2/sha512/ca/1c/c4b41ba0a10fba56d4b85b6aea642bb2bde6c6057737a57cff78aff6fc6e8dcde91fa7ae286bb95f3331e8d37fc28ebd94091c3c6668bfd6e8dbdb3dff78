{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\saile\\\\Desktop\\\\Sailesh\\\\React\\\\Wiki\\\\wiki-client\\\\pages\\\\program\\\\[pid].js\";\nimport { useState, useEffect, useContext } from \"react\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport Modal from \"react-modal\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport axios from \"axios\";\nimport { baseURL } from \"../../constants/baseURL\";\nimport styles from \"../../styles/Character.module.css\";\nimport { AuthContext } from \"../../constants/authContext\";\nimport { Character } from \"../../components/Character\";\nimport CharacterModals from \"../../components/CharacterModals\";\nimport CreateCharacterModal from \"../../components/CreateCharacterModal\";\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    height: \"150px\",\n    width: \"300px\",\n    backgroundColor: \"#efefef\",\n    border: \"1px solid black\",\n    borderRadius: \"5px\"\n  }\n};\nconst customStyles2 = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    height: \"600px\",\n    width: \"550px\",\n    backgroundColor: \"#efefef\"\n  }\n};\nexport const getStaticPaths = async () => {\n  const response = await axios.get(`${baseURL}/programs`).catch(error => console.log(error));\n  console.log(response);\n  const paths = response.data.programs.map(item => {\n    return {\n      params: {\n        pid: item._id\n      }\n    };\n  });\n  return {\n    paths,\n    fallback: false\n  };\n};\nexport const getStaticProps = async context => {\n  const pid = context.params.pid;\n  let characters = null;\n  let programs = null;\n  characters = await axios.get(`${baseURL}/programs/${pid}`).catch(error => console.log(error));\n  programs = await axios.get(`${baseURL}/programs`).catch(error => console.log(error));\n\n  if (programs.data.error !== null) {\n    return {\n      props: {\n        characters: characters.data,\n        programs: programs.data\n      }\n    };\n  } else {\n    let programData = programs.data.programs.filter(program => {\n      return program._id === pid;\n    });\n    return {\n      props: {\n        characters: characters.data,\n        programs: {\n          programs: programData,\n          error: null\n        }\n      }\n    };\n  }\n};\nexport default function ProgramPage({\n  characters,\n  programs\n}) {\n  const router = useRouter();\n  const {\n    pid\n  } = router.query;\n  const auth = useContext(AuthContext);\n  const {\n    logout,\n    checkAuth\n  } = auth;\n  const {\n    0: loggedIn,\n    1: setLoggedIn\n  } = useState(false);\n  const {\n    0: isProgramOwner,\n    1: setIsProgramOwner\n  } = useState(false);\n  const {\n    0: stateUID,\n    1: setStateUID\n  } = useState(\"\");\n  const {\n    0: stateToken,\n    1: setStateToken\n  } = useState(\"\");\n  const {\n    0: isConfirmModalOpen,\n    1: setIsConfirmModalOpen\n  } = useState(false);\n  const {\n    0: isDeleting,\n    1: setIsDeleting\n  } = useState(false);\n  const {\n    0: programDeleteError,\n    1: setProgramDeleteError\n  } = useState(null);\n  const {\n    0: isEditModalOpen,\n    1: setIsEditModalOpen\n  } = useState(false);\n  const {\n    0: name,\n    1: setName\n  } = useState(programs.programs[0].name);\n  const {\n    0: description,\n    1: setDescription\n  } = useState(programs.programs[0].description);\n  const {\n    0: start,\n    1: setStart\n  } = useState(programs.programs[0].startedIn);\n  const {\n    0: end,\n    1: setEnd\n  } = useState(programs.programs[0].endedIn);\n  const {\n    0: imgAddress,\n    1: setImgAddress\n  } = useState(programs.programs[0].image);\n  const {\n    0: saving,\n    1: setSaving\n  } = useState(false);\n  const {\n    0: newError,\n    1: setNewError\n  } = useState(null);\n  const {\n    0: isCreateCharacterModalOpen,\n    1: setIsCreateCharacterModalOpen\n  } = useState(false);\n\n  const handleConfirmModalOpen = () => {\n    setIsConfirmModalOpen(true);\n  };\n\n  const handleDeleteProgram = async () => {\n    setIsDeleting(true);\n    const response = await axios.delete(`${baseURL}/programs/${pid}`, {\n      data: {\n        uid: stateUID\n      },\n      headers: {\n        Authorization: `Bearer ${stateToken}`\n      }\n    }).catch(error => console.log(error));\n\n    if (response.data.success) {\n      setIsDeleting(false);\n      setIsConfirmModalOpen(false);\n      router.push(\"/\");\n    } else {\n      setIsDeleting(false);\n      setProgramDeleteError(response.data.error);\n    }\n  };\n\n  const handleOnDeleteError = () => {\n    setIsConfirmModalOpen(false);\n    setProgramDeleteError(null);\n  };\n\n  const handleEditModal = () => {\n    console.log(\"edit\");\n    setIsEditModalOpen(true);\n  };\n\n  useEffect(async () => {\n    let uid;\n    let token;\n\n    if (true) {\n      uid = localStorage.getItem(\"uid\");\n      token = localStorage.getItem(\"jwt_token\");\n      setStateUID(uid);\n      setStateToken(token);\n    }\n\n    let valid = await checkAuth(token);\n\n    if (valid) {\n      setLoggedIn(true);\n    } else {\n      setLoggedIn(false);\n    }\n\n    if (programs.programs[0].createdBy === uid) {\n      setIsProgramOwner(true);\n    } else {\n      setIsProgramOwner(false);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CharacterModals, {\n      customStyles: customStyles,\n      customStyles2: customStyles2,\n      isConfirmModalOpen: isConfirmModalOpen,\n      isEditModalOpen: isEditModalOpen,\n      isDeleting: isDeleting,\n      programDeleteError: programDeleteError,\n      handleOnDeleteError: handleOnDeleteError,\n      handleDeleteProgram: handleDeleteProgram,\n      setIsConfirmModalOpen: setIsConfirmModalOpen,\n      setIsEditModalOpen: setIsEditModalOpen,\n      name: name,\n      description: description,\n      start: start,\n      end: end,\n      imgAddress: imgAddress,\n      saving: saving,\n      newError: newError,\n      setName: setName,\n      setDescription: setDescription,\n      setStart: setStart,\n      setEnd: setEnd,\n      setImgAddress: setImgAddress,\n      setSaving: setSaving,\n      setNewError: setNewError,\n      stateUID: stateUID,\n      stateToken: stateToken,\n      pid: pid\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CreateCharacterModal, {\n      isCreateCharacterModalOpen: isCreateCharacterModalOpen,\n      setIsCreateCharacterModalOpen: setIsCreateCharacterModalOpen,\n      stateUID: stateUID,\n      stateToken: stateToken,\n      pid: pid\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.charactersPage,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.navbar,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.navbarContent,\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            href: \"/\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: \"Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.registerContainer,\n            children: !loggedIn ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                href: \"/login\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  children: \"Login\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                href: \"/signup\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  children: \"Signup\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n              id: styles.logout,\n              onClick: () => logout(),\n              children: \"Logout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.underline\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"underline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.programContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.programLeft,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.programHeadingContainer,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.programHeading,\n              children: programs.programs[0].name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 15\n            }, this), isProgramOwner && loggedIn ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: styles.programDelBtn,\n                onClick: () => handleConfirmModalOpen(),\n                children: \"DELETE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: styles.programUpdBtn,\n                onClick: () => handleEditModal(),\n                children: \"EDIT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.underline\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.programDescription,\n            children: programs.programs[0].description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.programRight,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: programs.programs[0].image,\n            alt: programs.programs[0].name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.underline\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Character, {\n        loggedIn: loggedIn,\n        characters: characters,\n        uid: stateUID,\n        setIsCreateCharacterModalOpen: setIsCreateCharacterModalOpen,\n        pid: pid,\n        token: stateToken\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}","map":{"version":3,"sources":["C:/Users/saile/Desktop/Sailesh/React/Wiki/wiki-client/pages/program/[pid].js"],"names":["useState","useEffect","useContext","useRouter","Link","Modal","ClipLoader","axios","baseURL","styles","AuthContext","Character","CharacterModals","CreateCharacterModal","customStyles","content","top","left","right","bottom","marginRight","transform","height","width","backgroundColor","border","borderRadius","customStyles2","getStaticPaths","response","get","catch","error","console","log","paths","data","programs","map","item","params","pid","_id","fallback","getStaticProps","context","characters","props","programData","filter","program","ProgramPage","router","query","auth","logout","checkAuth","loggedIn","setLoggedIn","isProgramOwner","setIsProgramOwner","stateUID","setStateUID","stateToken","setStateToken","isConfirmModalOpen","setIsConfirmModalOpen","isDeleting","setIsDeleting","programDeleteError","setProgramDeleteError","isEditModalOpen","setIsEditModalOpen","name","setName","description","setDescription","start","setStart","startedIn","end","setEnd","endedIn","imgAddress","setImgAddress","image","saving","setSaving","newError","setNewError","isCreateCharacterModalOpen","setIsCreateCharacterModalOpen","handleConfirmModalOpen","handleDeleteProgram","delete","uid","headers","Authorization","success","push","handleOnDeleteError","handleEditModal","token","localStorage","getItem","valid","createdBy","charactersPage","navbar","navbarContent","registerContainer","underline","programContainer","programLeft","programHeadingContainer","programHeading","programDelBtn","programUpdBtn","programDescription","programRight"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport Link from \"next/link\";\r\nimport Modal from \"react-modal\";\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\nimport axios from \"axios\";\r\nimport { baseURL } from \"../../constants/baseURL\";\r\nimport styles from \"../../styles/Character.module.css\";\r\nimport { AuthContext } from \"../../constants/authContext\";\r\nimport { Character } from \"../../components/Character\";\r\nimport CharacterModals from \"../../components/CharacterModals\";\r\nimport CreateCharacterModal from \"../../components/CreateCharacterModal\";\r\n\r\nconst customStyles = {\r\n  content: {\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    right: \"auto\",\r\n    bottom: \"auto\",\r\n    marginRight: \"-50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    height: \"150px\",\r\n    width: \"300px\",\r\n    backgroundColor: \"#efefef\",\r\n    border: \"1px solid black\",\r\n    borderRadius: \"5px\",\r\n  },\r\n};\r\nconst customStyles2 = {\r\n  content: {\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    right: \"auto\",\r\n    bottom: \"auto\",\r\n    marginRight: \"-50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    height: \"600px\",\r\n    width: \"550px\",\r\n    backgroundColor: \"#efefef\",\r\n  },\r\n};\r\n\r\nexport const getStaticPaths = async () => {\r\n  const response = await axios\r\n    .get(`${baseURL}/programs`)\r\n    .catch((error) => console.log(error));\r\n  console.log(response);\r\n  const paths = response.data.programs.map((item) => {\r\n    return {\r\n      params: {\r\n        pid: item._id,\r\n      },\r\n    };\r\n  });\r\n  return {\r\n    paths,\r\n    fallback: false,\r\n  };\r\n};\r\n\r\nexport const getStaticProps = async (context) => {\r\n  const pid = context.params.pid;\r\n  let characters = null;\r\n  let programs = null;\r\n  characters = await axios\r\n    .get(`${baseURL}/programs/${pid}`)\r\n    .catch((error) => console.log(error));\r\n  programs = await axios\r\n    .get(`${baseURL}/programs`)\r\n    .catch((error) => console.log(error));\r\n  if (programs.data.error !== null) {\r\n    return {\r\n      props: {\r\n        characters: characters.data,\r\n        programs: programs.data,\r\n      },\r\n    };\r\n  } else {\r\n    let programData = programs.data.programs.filter((program) => {\r\n      return program._id === pid;\r\n    });\r\n    return {\r\n      props: {\r\n        characters: characters.data,\r\n        programs: {\r\n          programs: programData,\r\n          error: null,\r\n        },\r\n      },\r\n    };\r\n  }\r\n};\r\n\r\nexport default function ProgramPage({ characters, programs }) {\r\n  const router = useRouter();\r\n  const { pid } = router.query;\r\n  const auth = useContext(AuthContext);\r\n  const { logout, checkAuth } = auth;\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [isProgramOwner, setIsProgramOwner] = useState(false);\r\n  const [stateUID, setStateUID] = useState(\"\");\r\n  const [stateToken, setStateToken] = useState(\"\");\r\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [programDeleteError, setProgramDeleteError] = useState(null);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [name, setName] = useState(programs.programs[0].name);\r\n  const [description, setDescription] = useState(\r\n    programs.programs[0].description\r\n  );\r\n  const [start, setStart] = useState(programs.programs[0].startedIn);\r\n  const [end, setEnd] = useState(programs.programs[0].endedIn);\r\n  const [imgAddress, setImgAddress] = useState(programs.programs[0].image);\r\n  const [saving, setSaving] = useState(false);\r\n  const [newError, setNewError] = useState(null);\r\n  const [isCreateCharacterModalOpen, setIsCreateCharacterModalOpen] =\r\n    useState(false);\r\n\r\n  const handleConfirmModalOpen = () => {\r\n    setIsConfirmModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteProgram = async () => {\r\n    setIsDeleting(true);\r\n    const response = await axios\r\n      .delete(`${baseURL}/programs/${pid}`, {\r\n        data: {\r\n          uid: stateUID,\r\n        },\r\n        headers: {\r\n          Authorization: `Bearer ${stateToken}`,\r\n        },\r\n      })\r\n      .catch((error) => console.log(error));\r\n    if (response.data.success) {\r\n      setIsDeleting(false);\r\n      setIsConfirmModalOpen(false);\r\n      router.push(\"/\");\r\n    } else {\r\n      setIsDeleting(false);\r\n      setProgramDeleteError(response.data.error);\r\n    }\r\n  };\r\n\r\n  const handleOnDeleteError = () => {\r\n    setIsConfirmModalOpen(false);\r\n    setProgramDeleteError(null);\r\n  };\r\n\r\n  const handleEditModal = () => {\r\n    console.log(\"edit\");\r\n    setIsEditModalOpen(true);\r\n  };\r\n\r\n  useEffect(async () => {\r\n    let uid;\r\n    let token;\r\n    if (typeof window !== undefined) {\r\n      uid = localStorage.getItem(\"uid\");\r\n      token = localStorage.getItem(\"jwt_token\");\r\n      setStateUID(uid);\r\n      setStateToken(token);\r\n    }\r\n    let valid = await checkAuth(token);\r\n    if (valid) {\r\n      setLoggedIn(true);\r\n    } else {\r\n      setLoggedIn(false);\r\n    }\r\n    if (programs.programs[0].createdBy === uid) {\r\n      setIsProgramOwner(true);\r\n    } else {\r\n      setIsProgramOwner(false);\r\n    }\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <CharacterModals\r\n        customStyles={customStyles}\r\n        customStyles2={customStyles2}\r\n        isConfirmModalOpen={isConfirmModalOpen}\r\n        isEditModalOpen={isEditModalOpen}\r\n        isDeleting={isDeleting}\r\n        programDeleteError={programDeleteError}\r\n        handleOnDeleteError={handleOnDeleteError}\r\n        handleDeleteProgram={handleDeleteProgram}\r\n        setIsConfirmModalOpen={setIsConfirmModalOpen}\r\n        setIsEditModalOpen={setIsEditModalOpen}\r\n        name={name}\r\n        description={description}\r\n        start={start}\r\n        end={end}\r\n        imgAddress={imgAddress}\r\n        saving={saving}\r\n        newError={newError}\r\n        setName={setName}\r\n        setDescription={setDescription}\r\n        setStart={setStart}\r\n        setEnd={setEnd}\r\n        setImgAddress={setImgAddress}\r\n        setSaving={setSaving}\r\n        setNewError={setNewError}\r\n        stateUID={stateUID}\r\n        stateToken={stateToken}\r\n        pid={pid}\r\n      />\r\n      <CreateCharacterModal\r\n        isCreateCharacterModalOpen={isCreateCharacterModalOpen}\r\n        setIsCreateCharacterModalOpen={setIsCreateCharacterModalOpen}\r\n        stateUID={stateUID}\r\n        stateToken={stateToken}\r\n        pid={pid}\r\n      />\r\n      <div className={styles.charactersPage}>\r\n        <div className={styles.navbar}>\r\n          <div className={styles.navbarContent}>\r\n            <Link href=\"/\">\r\n              <a>Home</a>\r\n            </Link>\r\n            <div className={styles.registerContainer}>\r\n              {!loggedIn ? (\r\n                <>\r\n                  <Link href=\"/login\">\r\n                    <a>Login</a>\r\n                  </Link>\r\n                  <Link href=\"/signup\">\r\n                    <a>Signup</a>\r\n                  </Link>\r\n                </>\r\n              ) : (\r\n                <p id={styles.logout} onClick={() => logout()}>\r\n                  Logout\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className={styles.underline}></div>\r\n          <div className=\"underline\"></div>\r\n        </div>\r\n        <div className={styles.programContainer}>\r\n          <div className={styles.programLeft}>\r\n            <div className={styles.programHeadingContainer}>\r\n              <p className={styles.programHeading}>\r\n                {programs.programs[0].name}\r\n              </p>\r\n              {isProgramOwner && loggedIn ? (\r\n                <>\r\n                  <button\r\n                    className={styles.programDelBtn}\r\n                    onClick={() => handleConfirmModalOpen()}\r\n                  >\r\n                    DELETE\r\n                  </button>\r\n                  <button\r\n                    className={styles.programUpdBtn}\r\n                    onClick={() => handleEditModal()}\r\n                  >\r\n                    EDIT\r\n                  </button>\r\n                </>\r\n              ) : null}\r\n            </div>\r\n            <div className={styles.underline}></div>\r\n            <p className={styles.programDescription}>\r\n              {programs.programs[0].description}\r\n            </p>\r\n          </div>\r\n          <div className={styles.programRight}>\r\n            <img\r\n              src={programs.programs[0].image}\r\n              alt={programs.programs[0].name}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={styles.underline}></div>\r\n        <Character\r\n          loggedIn={loggedIn}\r\n          characters={characters}\r\n          uid={stateUID}\r\n          setIsCreateCharacterModalOpen={setIsCreateCharacterModalOpen}\r\n          pid={pid}\r\n          token={stateToken}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}