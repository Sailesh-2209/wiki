{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Users/saile/Desktop/Sailesh/React/Wiki/wiki-client/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/saile/Desktop/Sailesh/React/Wiki/wiki-client/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\saile\\\\Desktop\\\\Sailesh\\\\React\\\\Wiki\\\\wiki-client\\\\pages\\\\program\\\\[pid].js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useContext } from \"react\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport Modal from \"react-modal\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport axios from \"axios\";\nimport { baseURL } from \"../../constants/baseURL\";\nimport styles from \"../../styles/Character.module.css\";\nimport { AuthContext } from \"../../constants/authContext\";\nimport { Character } from \"../../components/Character\";\nimport CharacterModals from \"../../components/CharacterModals\";\nimport CreateCharacterModal from \"../../components/CreateCharacterModal\";\nvar customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    height: \"150px\",\n    width: \"300px\",\n    backgroundColor: \"#efefef\",\n    border: \"1px solid black\",\n    borderRadius: \"5px\"\n  }\n};\nvar customStyles2 = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    height: \"600px\",\n    width: \"550px\",\n    backgroundColor: \"#efefef\"\n  }\n};\nexport var __N_SSG = true;\nexport default function ProgramPage(_ref) {\n  _s();\n\n  var characters = _ref.characters,\n      programs = _ref.programs;\n  var router = useRouter();\n  var pid = router.query.pid;\n  var auth = useContext(AuthContext);\n  var logout = auth.logout,\n      checkAuth = auth.checkAuth;\n\n  var _useState = useState(false),\n      loggedIn = _useState[0],\n      setLoggedIn = _useState[1];\n\n  var _useState2 = useState(false),\n      isProgramOwner = _useState2[0],\n      setIsProgramOwner = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      stateUID = _useState3[0],\n      setStateUID = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      stateToken = _useState4[0],\n      setStateToken = _useState4[1];\n\n  var _useState5 = useState(false),\n      isConfirmModalOpen = _useState5[0],\n      setIsConfirmModalOpen = _useState5[1];\n\n  var _useState6 = useState(false),\n      isDeleting = _useState6[0],\n      setIsDeleting = _useState6[1];\n\n  var _useState7 = useState(null),\n      programDeleteError = _useState7[0],\n      setProgramDeleteError = _useState7[1];\n\n  var _useState8 = useState(false),\n      isEditModalOpen = _useState8[0],\n      setIsEditModalOpen = _useState8[1];\n\n  var _useState9 = useState(programs.programs[0].name),\n      name = _useState9[0],\n      setName = _useState9[1];\n\n  var _useState10 = useState(programs.programs[0].description),\n      description = _useState10[0],\n      setDescription = _useState10[1];\n\n  var _useState11 = useState(programs.programs[0].startedIn),\n      start = _useState11[0],\n      setStart = _useState11[1];\n\n  var _useState12 = useState(programs.programs[0].endedIn),\n      end = _useState12[0],\n      setEnd = _useState12[1];\n\n  var _useState13 = useState(programs.programs[0].image),\n      imgAddress = _useState13[0],\n      setImgAddress = _useState13[1];\n\n  var _useState14 = useState(false),\n      saving = _useState14[0],\n      setSaving = _useState14[1];\n\n  var _useState15 = useState(null),\n      newError = _useState15[0],\n      setNewError = _useState15[1];\n\n  var _useState16 = useState(false),\n      isCreateCharacterModalOpen = _useState16[0],\n      setIsCreateCharacterModalOpen = _useState16[1];\n\n  var handleConfirmModalOpen = function handleConfirmModalOpen() {\n    setIsConfirmModalOpen(true);\n  };\n\n  var handleDeleteProgram = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsDeleting(true);\n              _context.next = 3;\n              return axios[\"delete\"](\"\".concat(baseURL, \"/programs/\").concat(pid), {\n                data: {\n                  uid: stateUID\n                },\n                headers: {\n                  Authorization: \"Bearer \".concat(stateToken)\n                }\n              })[\"catch\"](function (error) {\n                return console.log(error);\n              });\n\n            case 3:\n              response = _context.sent;\n\n              if (response.data.success) {\n                setIsDeleting(false);\n                setIsConfirmModalOpen(false);\n                router.push(\"/\");\n              } else {\n                setIsDeleting(false);\n                setProgramDeleteError(response.data.error);\n              }\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleDeleteProgram() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleOnDeleteError = function handleOnDeleteError() {\n    setIsConfirmModalOpen(false);\n    setProgramDeleteError(null);\n  };\n\n  var handleEditModal = function handleEditModal() {\n    console.log(\"edit\");\n    setIsEditModalOpen(true);\n  };\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var uid, token, valid;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (true) {\n              uid = localStorage.getItem(\"uid\");\n              token = localStorage.getItem(\"jwt_token\");\n              setStateUID(uid);\n              setStateToken(token);\n            }\n\n            _context2.next = 3;\n            return checkAuth(token);\n\n          case 3:\n            valid = _context2.sent;\n\n            if (valid) {\n              setLoggedIn(true);\n            } else {\n              setLoggedIn(false);\n            }\n\n            if (programs.programs[0].createdBy === uid) {\n              setIsProgramOwner(true);\n            } else {\n              setIsProgramOwner(false);\n            }\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })));\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CharacterModals, {\n      customStyles: customStyles,\n      customStyles2: customStyles2,\n      isConfirmModalOpen: isConfirmModalOpen,\n      isEditModalOpen: isEditModalOpen,\n      isDeleting: isDeleting,\n      programDeleteError: programDeleteError,\n      handleOnDeleteError: handleOnDeleteError,\n      handleDeleteProgram: handleDeleteProgram,\n      setIsConfirmModalOpen: setIsConfirmModalOpen,\n      setIsEditModalOpen: setIsEditModalOpen,\n      name: name,\n      description: description,\n      start: start,\n      end: end,\n      imgAddress: imgAddress,\n      saving: saving,\n      newError: newError,\n      setName: setName,\n      setDescription: setDescription,\n      setStart: setStart,\n      setEnd: setEnd,\n      setImgAddress: setImgAddress,\n      setSaving: setSaving,\n      setNewError: setNewError,\n      stateUID: stateUID,\n      stateToken: stateToken,\n      pid: pid\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CreateCharacterModal, {\n      isCreateCharacterModalOpen: isCreateCharacterModalOpen,\n      setIsCreateCharacterModalOpen: setIsCreateCharacterModalOpen,\n      stateUID: stateUID,\n      stateToken: stateToken,\n      pid: pid\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.charactersPage,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.navbar,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.navbarContent,\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            href: \"/\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: \"Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.registerContainer,\n            children: !loggedIn ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                href: \"/login\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  children: \"Login\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                href: \"/signup\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  children: \"Signup\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n              id: styles.logout,\n              onClick: function onClick() {\n                return logout();\n              },\n              children: \"Logout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.underline\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"underline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.programContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.programLeft,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.programHeadingContainer,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.programHeading,\n              children: programs.programs[0].name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 15\n            }, this), isProgramOwner && loggedIn ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: styles.programDelBtn,\n                onClick: function onClick() {\n                  return handleConfirmModalOpen();\n                },\n                children: \"DELETE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: styles.programUpdBtn,\n                onClick: function onClick() {\n                  return handleEditModal();\n                },\n                children: \"EDIT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.underline\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.programDescription,\n            children: programs.programs[0].description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.programRight,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: programs.programs[0].image,\n            alt: programs.programs[0].name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.underline\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Character, {\n        loggedIn: loggedIn,\n        characters: characters,\n        uid: stateUID,\n        setIsCreateCharacterModalOpen: setIsCreateCharacterModalOpen,\n        pid: pid,\n        token: stateToken\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ProgramPage, \"tQJSCsIG5P8CpAPt56v3DoHR8lo=\", false, function () {\n  return [useRouter];\n});\n\n_c = ProgramPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProgramPage\");","map":{"version":3,"sources":["C:/Users/saile/Desktop/Sailesh/React/Wiki/wiki-client/pages/program/[pid].js"],"names":["useState","useEffect","useContext","useRouter","Link","Modal","ClipLoader","axios","baseURL","styles","AuthContext","Character","CharacterModals","CreateCharacterModal","customStyles","content","top","left","right","bottom","marginRight","transform","height","width","backgroundColor","border","borderRadius","customStyles2","ProgramPage","characters","programs","router","pid","query","auth","logout","checkAuth","loggedIn","setLoggedIn","isProgramOwner","setIsProgramOwner","stateUID","setStateUID","stateToken","setStateToken","isConfirmModalOpen","setIsConfirmModalOpen","isDeleting","setIsDeleting","programDeleteError","setProgramDeleteError","isEditModalOpen","setIsEditModalOpen","name","setName","description","setDescription","startedIn","start","setStart","endedIn","end","setEnd","image","imgAddress","setImgAddress","saving","setSaving","newError","setNewError","isCreateCharacterModalOpen","setIsCreateCharacterModalOpen","handleConfirmModalOpen","handleDeleteProgram","data","uid","headers","Authorization","error","console","log","response","success","push","handleOnDeleteError","handleEditModal","localStorage","getItem","token","valid","createdBy","charactersPage","navbar","navbarContent","registerContainer","underline","programContainer","programLeft","programHeadingContainer","programHeading","programDelBtn","programUpdBtn","programDescription","programRight"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport Link from \"next/link\";\r\nimport Modal from \"react-modal\";\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\nimport axios from \"axios\";\r\nimport { baseURL } from \"../../constants/baseURL\";\r\nimport styles from \"../../styles/Character.module.css\";\r\nimport { AuthContext } from \"../../constants/authContext\";\r\nimport { Character } from \"../../components/Character\";\r\nimport CharacterModals from \"../../components/CharacterModals\";\r\nimport CreateCharacterModal from \"../../components/CreateCharacterModal\";\r\n\r\nconst customStyles = {\r\n  content: {\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    right: \"auto\",\r\n    bottom: \"auto\",\r\n    marginRight: \"-50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    height: \"150px\",\r\n    width: \"300px\",\r\n    backgroundColor: \"#efefef\",\r\n    border: \"1px solid black\",\r\n    borderRadius: \"5px\",\r\n  },\r\n};\r\nconst customStyles2 = {\r\n  content: {\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    right: \"auto\",\r\n    bottom: \"auto\",\r\n    marginRight: \"-50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    height: \"600px\",\r\n    width: \"550px\",\r\n    backgroundColor: \"#efefef\",\r\n  },\r\n};\r\n\r\nexport const getStaticPaths = async () => {\r\n  const response = await axios\r\n    .get(`${baseURL}/programs`)\r\n    .catch((error) => console.log(error));\r\n  console.log(response);\r\n  const paths = response.data.programs.map((item) => {\r\n    return {\r\n      params: {\r\n        pid: item._id,\r\n      },\r\n    };\r\n  });\r\n  return {\r\n    paths,\r\n    fallback: false,\r\n  };\r\n};\r\n\r\nexport const getStaticProps = async (context) => {\r\n  const pid = context.params.pid;\r\n  let characters = null;\r\n  let programs = null;\r\n  characters = await axios\r\n    .get(`${baseURL}/programs/${pid}`)\r\n    .catch((error) => console.log(error));\r\n  programs = await axios\r\n    .get(`${baseURL}/programs`)\r\n    .catch((error) => console.log(error));\r\n  if (programs.data.error !== null) {\r\n    return {\r\n      props: {\r\n        characters: characters.data,\r\n        programs: programs.data,\r\n      },\r\n    };\r\n  } else {\r\n    let programData = programs.data.programs.filter((program) => {\r\n      return program._id === pid;\r\n    });\r\n    return {\r\n      props: {\r\n        characters: characters.data,\r\n        programs: {\r\n          programs: programData,\r\n          error: null,\r\n        },\r\n      },\r\n    };\r\n  }\r\n};\r\n\r\nexport default function ProgramPage({ characters, programs }) {\r\n  const router = useRouter();\r\n  const { pid } = router.query;\r\n  const auth = useContext(AuthContext);\r\n  const { logout, checkAuth } = auth;\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [isProgramOwner, setIsProgramOwner] = useState(false);\r\n  const [stateUID, setStateUID] = useState(\"\");\r\n  const [stateToken, setStateToken] = useState(\"\");\r\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [programDeleteError, setProgramDeleteError] = useState(null);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [name, setName] = useState(programs.programs[0].name);\r\n  const [description, setDescription] = useState(\r\n    programs.programs[0].description\r\n  );\r\n  const [start, setStart] = useState(programs.programs[0].startedIn);\r\n  const [end, setEnd] = useState(programs.programs[0].endedIn);\r\n  const [imgAddress, setImgAddress] = useState(programs.programs[0].image);\r\n  const [saving, setSaving] = useState(false);\r\n  const [newError, setNewError] = useState(null);\r\n  const [isCreateCharacterModalOpen, setIsCreateCharacterModalOpen] =\r\n    useState(false);\r\n\r\n  const handleConfirmModalOpen = () => {\r\n    setIsConfirmModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteProgram = async () => {\r\n    setIsDeleting(true);\r\n    const response = await axios\r\n      .delete(`${baseURL}/programs/${pid}`, {\r\n        data: {\r\n          uid: stateUID,\r\n        },\r\n        headers: {\r\n          Authorization: `Bearer ${stateToken}`,\r\n        },\r\n      })\r\n      .catch((error) => console.log(error));\r\n    if (response.data.success) {\r\n      setIsDeleting(false);\r\n      setIsConfirmModalOpen(false);\r\n      router.push(\"/\");\r\n    } else {\r\n      setIsDeleting(false);\r\n      setProgramDeleteError(response.data.error);\r\n    }\r\n  };\r\n\r\n  const handleOnDeleteError = () => {\r\n    setIsConfirmModalOpen(false);\r\n    setProgramDeleteError(null);\r\n  };\r\n\r\n  const handleEditModal = () => {\r\n    console.log(\"edit\");\r\n    setIsEditModalOpen(true);\r\n  };\r\n\r\n  useEffect(async () => {\r\n    let uid;\r\n    let token;\r\n    if (typeof window !== undefined) {\r\n      uid = localStorage.getItem(\"uid\");\r\n      token = localStorage.getItem(\"jwt_token\");\r\n      setStateUID(uid);\r\n      setStateToken(token);\r\n    }\r\n    let valid = await checkAuth(token);\r\n    if (valid) {\r\n      setLoggedIn(true);\r\n    } else {\r\n      setLoggedIn(false);\r\n    }\r\n    if (programs.programs[0].createdBy === uid) {\r\n      setIsProgramOwner(true);\r\n    } else {\r\n      setIsProgramOwner(false);\r\n    }\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <CharacterModals\r\n        customStyles={customStyles}\r\n        customStyles2={customStyles2}\r\n        isConfirmModalOpen={isConfirmModalOpen}\r\n        isEditModalOpen={isEditModalOpen}\r\n        isDeleting={isDeleting}\r\n        programDeleteError={programDeleteError}\r\n        handleOnDeleteError={handleOnDeleteError}\r\n        handleDeleteProgram={handleDeleteProgram}\r\n        setIsConfirmModalOpen={setIsConfirmModalOpen}\r\n        setIsEditModalOpen={setIsEditModalOpen}\r\n        name={name}\r\n        description={description}\r\n        start={start}\r\n        end={end}\r\n        imgAddress={imgAddress}\r\n        saving={saving}\r\n        newError={newError}\r\n        setName={setName}\r\n        setDescription={setDescription}\r\n        setStart={setStart}\r\n        setEnd={setEnd}\r\n        setImgAddress={setImgAddress}\r\n        setSaving={setSaving}\r\n        setNewError={setNewError}\r\n        stateUID={stateUID}\r\n        stateToken={stateToken}\r\n        pid={pid}\r\n      />\r\n      <CreateCharacterModal\r\n        isCreateCharacterModalOpen={isCreateCharacterModalOpen}\r\n        setIsCreateCharacterModalOpen={setIsCreateCharacterModalOpen}\r\n        stateUID={stateUID}\r\n        stateToken={stateToken}\r\n        pid={pid}\r\n      />\r\n      <div className={styles.charactersPage}>\r\n        <div className={styles.navbar}>\r\n          <div className={styles.navbarContent}>\r\n            <Link href=\"/\">\r\n              <a>Home</a>\r\n            </Link>\r\n            <div className={styles.registerContainer}>\r\n              {!loggedIn ? (\r\n                <>\r\n                  <Link href=\"/login\">\r\n                    <a>Login</a>\r\n                  </Link>\r\n                  <Link href=\"/signup\">\r\n                    <a>Signup</a>\r\n                  </Link>\r\n                </>\r\n              ) : (\r\n                <p id={styles.logout} onClick={() => logout()}>\r\n                  Logout\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className={styles.underline}></div>\r\n          <div className=\"underline\"></div>\r\n        </div>\r\n        <div className={styles.programContainer}>\r\n          <div className={styles.programLeft}>\r\n            <div className={styles.programHeadingContainer}>\r\n              <p className={styles.programHeading}>\r\n                {programs.programs[0].name}\r\n              </p>\r\n              {isProgramOwner && loggedIn ? (\r\n                <>\r\n                  <button\r\n                    className={styles.programDelBtn}\r\n                    onClick={() => handleConfirmModalOpen()}\r\n                  >\r\n                    DELETE\r\n                  </button>\r\n                  <button\r\n                    className={styles.programUpdBtn}\r\n                    onClick={() => handleEditModal()}\r\n                  >\r\n                    EDIT\r\n                  </button>\r\n                </>\r\n              ) : null}\r\n            </div>\r\n            <div className={styles.underline}></div>\r\n            <p className={styles.programDescription}>\r\n              {programs.programs[0].description}\r\n            </p>\r\n          </div>\r\n          <div className={styles.programRight}>\r\n            <img\r\n              src={programs.programs[0].image}\r\n              alt={programs.programs[0].name}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={styles.underline}></div>\r\n        <Character\r\n          loggedIn={loggedIn}\r\n          characters={characters}\r\n          uid={stateUID}\r\n          setIsCreateCharacterModalOpen={setIsCreateCharacterModalOpen}\r\n          pid={pid}\r\n          token={stateToken}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}